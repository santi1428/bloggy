(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{10:function(t,e,n){var a=n(41);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(3)(a,s);a.locals&&(t.exports=a.locals)},100:function(t,e,n){"use strict";n.r(e);var a=n(8),s=n(0);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={name:"Comentar",props:["postId"],data:function(){return{comment:{comment:"",postId:null,userId:null},button:0}},methods:r({publicarComentario:function(){var t=this;this.button=1;0==/^\s+$/.test(this.comment.comment)&&""!=this.comment.comment?(this.comment.postId=this.postId,this.comment.userId=this.getUserId,this.comentar(this.comment).then(function(e){200==e.status&&(t.button=0,t.comment.comment="",t.asignarDatosToast({msg:"Comentario publicado",clase:"bg-info",icono:"fas fa-comments"}),t.$emit("aumentar-comentarios"))}).catch(function(t){return console.log(t)})):this.button=0}},Object(s.b)(["comentar","asignarDatosToast"])),computed:r({},Object(s.c)(["getUserImage","getUserId"]))},l=(n(57),n(1)),m=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-auto pl-3 pr-0 pt-2"},[n("img",{attrs:{src:"/storage/profile_images/"+t.getUserImage,id:"user-img"}})]),t._v(" "),n("div",{staticClass:"col-10 pl-2"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.comment,expression:"comment.comment"}],staticClass:"form-control",attrs:{id:"comentario",placeholder:"Escribe tu comentario aquí",disabled:1==t.button},domProps:{value:t.comment.comment},on:{input:function(e){e.target.composing||t.$set(t.comment,"comment",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-auto"},[0==t.button?n("button",{staticClass:"btn",attrs:{id:"boton-comentario","data-toggle":"tooltip","data-placement":"top",title:"Comentar"},on:{click:t.publicarComentario}},[n("i",{staticClass:"fas fa-comment fa-3x text-info"})]):t._e(),t._v(" "),1==t.button?n("div",{staticClass:"spinner-border text-info mt-3",attrs:{role:"status",id:"spinner"}},[n("span",{staticClass:"sr-only"},[t._v("Comentando...")])]):t._e()])])},[],!1,null,"83ae6cb2",null).exports,u=n(6);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v={name:"Post",components:{like:a.a,comentar:m,toast:u.a},data:function(){return{post:null,mostrarCargandoComentarios:!1}},methods:p({},Object(s.d)(["resetearPaginacionDeComentarios"]),{},Object(s.b)(["traerPublicacion","traerComentarios","eliminarComentario"]),{mostrarFechaRelativa:function(t){return moment.updateLocale("es",{relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un dia",dd:"%d dias",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"}}),moment.utc(t).local().fromNow()},mostrarFechaDetallada:function(t){moment.locale("es");var e=moment(moment.utc(t).local()).format("dddd, MMMM D YYYY, h:mm a");return e.charAt(0).toUpperCase()+e.slice(1)},borrarComentario:function(t){var e=this;this.eliminarComentario(t).then(function(){e.post.comments_amount--}).catch(function(t){return console.log(t)})},traerComentariosConScroll:function(){var t=this;new IntersectionObserver(function(e){e.forEach(function(e){e.intersectionRatio>-1&&!1===t.mostrarCargandoComentarios&&(t.mostrarCargandoComentarios=!0,t.traerComentarios(t.post.id).then(function(){t.mostrarCargandoComentarios=!1}).catch(function(){t.mostrarCargandoComentarios=!0}))})}).observe(document.getElementById("infinite-scroll-trigger"))}}),computed:p({},Object(s.c)(["getComments","getMostrarAnimacionEliminarDeComentarioId","getUserId","loggedIn"]),{tituloPublicacion:function(){if(null!=this.post){var t=this.post.body.length<=60?"":"...";return this.post.body.replace(/<\/?[^>]+(>|$)/g,"").substr(0,60)+t}return""}}),created:function(){var t=this;this.traerPublicacion(this.$route.params.id).then(function(e){t.post=e,t.resetearPaginacionDeComentarios(),t.traerComentarios(e.id).then(function(){t.traerComentariosConScroll()}).catch(function(t){return console.log(t)})}).catch(function(e){return t.$router.push({name:"Posts"})})},mounted:function(){}},h=(n(59),Object(l.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("title",[t._v(t._s(t.tituloPublicacion))]),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col"},[null==t.post?n("div",{staticClass:"row justify-content-center mt-5"},[t._m(0)]):n("div",{staticClass:"row  shadow-sm rounded py-3 mt-md-2"},[n("div",{staticClass:"col"},[n("toast"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("img",{attrs:{src:"/storage/profile_images/"+t.post.userImage,alt:"imagen no disponible",id:"img-user-post"}})]),t._v(" "),n("div",{staticClass:"col-auto"},[n("p",{staticClass:"nombre mb-0"},[t._v(t._s(t.post.userName))]),t._v(" "),n("div",{staticClass:"fecha"},[t._v(t._s(t.mostrarFechaDetallada(t.post.created_at)))])])]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col"},[n("div",{domProps:{innerHTML:t._s(t.post.body)}})])]),t._v(" "),n("hr"),t._v(" "),t.loggedIn?n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("like",{attrs:{id:t.post.id,likes_amount:t.post.likes_amount}})],1)]):t._e(),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col"},[n("h5",[t._v("Comentarios"),n("span",{staticClass:"badge badge-info ml-2"},[t._v(t._s(t.post.comments_amount))])])])]),t._v(" "),t.loggedIn?n("comentar",{attrs:{postId:t.post.id},on:{"aumentar-comentarios":function(e){t.post.comments_amount++}}}):n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-10 col-md-8 col-lg-6 col-xl-5"},[n("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[n("router-link",{staticClass:"alert-link",attrs:{to:{name:"Login"}}},[t._v("Inicia sesión ")]),t._v(" o "),n("router-link",{staticClass:"alert-link",attrs:{to:{name:"Register"}}},[t._v("registrate ")]),t._v("si no tienes cuenta para comentar o dar like\n                                        "),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])],1)])]),t._v(" "),n("hr"),t._v(" "),null!==t.getComments?n("div",[t._l(t.getComments,function(e){return n("div",{key:e.id},[n("div",{staticClass:"row mt-2 animated fadeIn",class:{"animated fadeOut":e.id==t.getMostrarAnimacionEliminarDeComentarioId},attrs:{id:"comment"}},[n("div",{staticClass:"col-auto"},[n("img",{attrs:{src:"/storage/profile_images/"+e.image,alt:"imagen no disponible",id:"img-user-comment"}})]),t._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("p",{staticClass:"nombre m-0 text-dark"},[n("strong",[t._v(t._s(e.name))])])]),t._v(" "),n("div",{staticClass:"col-auto ml-3"},[n("div",{staticClass:"fecha text-primary"},[t._v(t._s(t.mostrarFechaRelativa(e.created_at)))])]),t._v(" "),t.post.userId===parseInt(t.getUserId)||e.userId===parseInt(t.getUserId)?n("div",{staticClass:"col-auto ml-auto"},[n("a",{staticClass:"btn-eliminar",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.borrarComentario(e.id)}}},[n("i",{staticClass:"fas fa-trash-alt text-danger"})])]):t._e()]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("p",{staticClass:"comment"},[t._v(t._s(e.comment))])])])])]),t._v(" "),n("hr")])}),t._v(" "),t.mostrarCargandoComentarios?n("div",{staticClass:"row my-5"},[t._m(1)]):t._e()],2):n("div",[t._m(2)]),t._v(" "),n("div",{attrs:{id:"infinite-scroll-trigger"}})],1)])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-10"},[e("h5",{staticClass:"text-dark text-center",attrs:{id:"cargando"}},[e("i",{staticClass:"fa fa-spinner fa-pulse fa-fw mr-1"}),this._v("Cargando publicacion\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col"},[e("h5",{staticClass:"text-dark text-center",attrs:{id:"cargando"}},[e("i",{staticClass:"fa fa-spinner fa-pulse fa-fw mr-1"}),this._v("Cargando comentarios \n                                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col"},[e("h5",{staticClass:"text-dark text-center",attrs:{id:"cargando"}},[e("i",{staticClass:"fa fa-spinner fa-pulse fa-fw mr-2"}),this._v("Cargando comentarios\n                                ")])])])}],!1,null,"60926c39",null));e.default=h.exports},11:function(t,e,n){var a=n(44);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(3)(a,s);a.locals&&(t.exports=a.locals)},19:function(t,e,n){var a=n(58);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(3)(a,s);a.locals&&(t.exports=a.locals)},20:function(t,e,n){var a=n(60);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(3)(a,s);a.locals&&(t.exports=a.locals)},40:function(t,e,n){"use strict";var a=n(10);n.n(a).a},41:function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"\n#toast{\n    position: fixed;\n    z-index: 1000;\n    width: 19vw;\n    top: 90vh;\n    left: 25vh;\n}\n#mensajeToast{\n    font-size: 15px;\n}\n.fade {\n  transition: opacity 0.3s linear !important;\n}\n@media (max-width: 412px) {\n#toast{\n        position: fixed;\n        z-index: 1000;\n        width: 60vw;\n        top: 85vh;\n        left: 20vw;\n}\n}\n@media(min-width: 321px) and (max-width: 360px){\n#toast{\n        position: fixed;\n        z-index: 1000;\n        width: 60vw;\n        top: 85vh;\n        left: 20vw;\n}\n}\n\n\n",""])},43:function(t,e,n){"use strict";var a=n(11);n.n(a).a},44:function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"\n#botonLike[data-v-63d4125d]{\n    text-decoration: none;\n    font-size: 16px;\n}\n.fa-thumbs-up[data-v-63d4125d]{\n    font-size: 20px;\n}\n",""])},57:function(t,e,n){"use strict";var a=n(19);n.n(a).a},58:function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"\n#comentario[data-v-83ae6cb2]{\n    height: 11vh;\n    border-radius: 25px;\n    display: inline-block;\n}\n#boton-comentario[data-v-83ae6cb2]{\n    font-size: 16px;\n    transition: 0.3s;\n}\n#boton-comentario[data-v-83ae6cb2]:hover{\n    font-size: 17px;\n    transition: 0.3s;\n}\n#user-img[data-v-83ae6cb2]{\n    border-radius: 100%;\n    display: inline-block;\n    height: 48px;\n    width: 48px;\n}\n#spinner[data-v-83ae6cb2]{\n    width: 2.5rem; \n    height: 2.5rem;\n}\n\n",""])},59:function(t,e,n){"use strict";var a=n(20);n.n(a).a},6:function(t,e,n){"use strict";var a=n(0);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r={name:"Toast",computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(n,!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Object(a.c)(["getMensajeToast","getClaseToast","getIconoToast"]))},i=(n(40),n(1)),c=Object(i.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"toast shadow-lg rounded",attrs:{id:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true","data-delay":"2500"}},[e("div",{staticClass:"toast-body text-center text-white",class:[this.getClaseToast],attrs:{id:"mensajeToast"}},[e("i",{staticClass:"mr-2",class:[this.getIconoToast]}),this._v(this._s(this.getMensajeToast)+"\n    ")])])},[],!1,null,null,null);e.a=c.exports},60:function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"\n.nombre[data-v-60926c39]{\n    font-size: 1rem;\n}\n.fecha[data-v-60926c39]{\n    font-size: 0.9rem;\n}\n#comment[data-v-60926c39]{\n    position: relative;\n    min-height: 15vh;\n}\n#img-user-post[data-v-60926c39]{\n    border-radius: 100%;\n    height: 48px;\n    width: 48px;\n}\n.nombre[data-v-60926c39]{\n    font-size: 1rem;\n}\n.fecha[data-v-60926c39]{\n    font-size: 0.8rem;\n}\n#img-user-comment[data-v-60926c39]{\n    border-radius: 100%;\n    height: 48px;\n    width: 48px;\n}\n.comment[data-v-60926c39]{\n    font-size: 0.9rem;\n}\n.btn-eliminar[data-v-60926c39]{\n    font-size: 18px;\n}\n#cargando[data-v-60926c39]{\n    font-size: 1rem;\n}\n#infinite-scroll-trigger[data-v-60926c39]{\n    height: 1px;\n}\n\n",""])},8:function(t,e,n){"use strict";var a=n(0);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(n,!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i={name:"Like",props:["id","likes_amount"],data:function(){return{liked:!1,likes:this.likes_amount}},methods:o({like:function(){var t=this;!1===this.liked?this.registrarLike(this.id).then(function(){return t.likes++}).catch(function(t){return console.log(t)}):this.removerLike(this.id).then(function(e){t.asignarDatosToast({msg:"Te ha dejado de gustar",clase:"bg-primary",icono:"fas fa-check-circle"}),t.likes--}).catch(function(t){return console.log(t)})}},Object(a.b)(["registrarLike","removerLike","asignarDatosToast"])),computed:o({comprobarMeGusta:function(){var t=this;return this.getUserLikes.find(function(e){return e===t.id})?(this.liked=!0,{class:"fas fa-thumbs-up",title:"Ya no me gusta"}):(this.liked=!1,{class:"far fa-thumbs-up",title:"Me gusta"})}},Object(a.c)(["getUserLikes"]))},c=(n(43),n(1)),l=Object(c.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:"#",id:"botonLike","data-toggle":"tooltip","data-placement":"top",title:t.comprobarMeGusta.title},on:{click:function(e){return e.preventDefault(),t.like(e)}}},[n("i",{staticClass:"mr-2",class:t.comprobarMeGusta.class}),t._v(t._s(t.likes)+" likes")])},[],!1,null,"63d4125d",null);e.a=l.exports}}]);